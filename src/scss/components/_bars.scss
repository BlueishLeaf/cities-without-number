@import url(../utils/_colors.scss);
@import url(../utils/_mixins.scss);

@mixin bar-styling($start-color, $end-color) {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 0; // Initial width will be set by JS
  background: linear-gradient(90deg, $start-color, $end-color);
  transition: width 0.5s;
  overflow: hidden;
}

@mixin bar-overlay($type: 'pulse') {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;

  @if $type == 'pulse' {
    background: linear-gradient(90deg,
            transparent 0%,
            rgba(255, 255, 255, 0.2) 50%,
            transparent 100%);
    animation: bar-pulse 2s infinite;
  } @else if $type == 'striped' {
    background: repeating-linear-gradient(
                    45deg,
                    rgba(0, 0, 0, 0.1),
                    rgba(0, 0, 0, 0.1) 10px,
                    rgba(255, 255, 255, 0.1) 10px,
                    rgba(255, 255, 255, 0.1) 20px
    );
  } @else if $type == 'striped-angled' {
    background: repeating-linear-gradient(
                    -45deg,
                    rgba(0, 0, 0, 0.2),
                    rgba(0, 0, 0, 0.2) 5px,
                    rgba(255, 0, 0, 0.3) 5px,
                    rgba(255, 0, 0, 0.3) 10px
    );
  } @else if $type == 'xp-pattern' {
    background: repeating-linear-gradient(
                    45deg,
                    rgba(255, 255, 255, 0.1),
                    rgba(255, 255, 255, 0.1) 5px,
                    rgba(0, 255, 0, 0.2) 5px,
                    rgba(0, 255, 0, 0.2) 10px
    );
  }
}

// Keyframes
@keyframes bar-pulse {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

// Status Bar Containers
.status-bar-container {
  position: relative;
  padding-left: 40px;
  margin-bottom: 15px;
}

// Status Bar Headers
.status-bar-header {
  display: none;
}

.status-bar-values {
  display: flex;
  align-items: center;
  gap: 10px;
}

.status-max {
  color: $neon-cyan;
  font-size: 16px;

  &.max-hp {
    color: $neon-magenta;
  }

  &.max-strain {
    color: $neon-yellow;
  }
}

// Bar Wrappers
.bar-wrapper {
  width: 100%;
  height: 30px;
  background-color: rgba(255, 255, 255, 0.1);
  border: 1px solid $border-color;
  position: relative;
  overflow: hidden;
}

// Status Icons
.status-icon {
  position: absolute;
  left: 0;
  top: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  cursor: pointer;

  svg {
    width: 80%;
    height: 80%;
    fill: none;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;

    &.icon-cog {
      display: none;
    }
  }

  &:hover {
    svg.icon-default {
      display: none;
    }

    svg.icon-cog {
      display: block;
    }
  }

  &.hp-icon {
    @include neon-icon($neon-magenta);
  }

  &.armor-icon {
    @include neon-icon($neon-cyan);
  }

  &.strain-icon {
    @include neon-icon($neon-yellow);
  }

  &.xp-icon {
    @include neon-icon($neon-green);
  }
}

// Permanent Strain Label
.perm-strain-label {
  display: none;
  position: absolute;
  right: 10px;
  top: -25px;
  font-size: 12px;
  color: $neon-red;
  text-transform: uppercase;
}

// Bar Values
.bar-value {
  position: absolute;
  z-index: 5;
  font-weight: bold;
  font-size: 16px;
  color: white;
  text-shadow: 0 0 3px black, 0 0 5px black;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.current-value {
  background: transparent;
  border: none;
  color: white;
  font-size: 16px;
  text-align: right;
  font-weight: bold;
  width: 30px;
  font-family: 'Courier New', monospace;
  text-shadow: 0 0 3px black, 0 0 5px black;
  -moz-appearance: textfield;
  padding: 0;
  margin: 0;

  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
    opacity: 1; // Keep the scroll functionality
  }

  &:focus {
    outline: none;
    text-shadow: 0 0 5px $neon-cyan;
  }
}

.max-value {
  margin-left: 10px;
}

// Bar Styles
.hp-bar {
  @include bar-styling($neon-red, $neon-magenta);

  &::after {
    @include bar-overlay('pulse');
  }
}

.armor-bar {
  @include bar-styling($neon-cyan, #0066ff);

  &::after {
    @include bar-overlay('striped');
  }
}

.strain-bar {
  @include bar-styling($neon-yellow, #ffa500);

  &::after {
    @include bar-overlay('pulse');
    animation: bar-pulse 3s infinite;
  }
}

.permanent-strain-bar {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 20%;
  background: rgba(255, 0, 0, 0.5);
  transition: width 0.5s;
  overflow: hidden;
  z-index: 2;

  &::after {
    @include bar-overlay('striped-angled');
  }
}

.xp-bar {
  @include bar-styling($neon-green, #00aa44);

  &::after {
    @include bar-overlay('xp-pattern');
  }
}